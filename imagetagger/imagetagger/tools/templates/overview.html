{% extends 'base/base.html' %}
{% load widget_tweaks %}

{% block bodyblock %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <h1>Tools</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            {% if not tools %}
                <div class="alert alert-warning" role="alert">
                    There are no tools uploaded yet!
                </div>
            {% endif %}
            {% for tool in tools %}
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="btn-group pull-right">
                                    <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-download" aria-hidden="true"></span></a>
                                    <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                                    <a href="#" class="btn btn-default"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
                                </div>
                                <h4>{{ tool.name }}</h4>
                            </div>
                            <div class="panel-body">
                                {% if tool.team %}
                                    <p>
                                        <b>
                                            Team:
                                        </b>
                                        <a href="{% url 'users:team' tool.team.id %}">
                                            {{ tool.team.name }}
                                        </a>
                                    </p>
                                {% endif %}
                                {%  if tool.creator %}
                                    <p>
                                        <b>
                                            Creator:
                                        </b>
                                        <a href="{% url 'users:user' tool.creator.id %}">
                                            {{ tool.creator }}
                                        </a>
                                    </p>
                                {% endif %}
                                <p>{{ tool.description }}</p>
                                    <a class="btn btn-default pull-right" href="{% url 'tools:download' tool.id %}">
                                        Download <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                                    </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="col-md-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <p class="panel-title">
                        Upload tool
                    </p>
                </div>
                <div class="panel-body">
                    <form method="POST" enctype="multipart/form-data" action="{% url 'tools:create' %}">
                        {% csrf_token %}
                        <label for="id_name"><h3>{{ form.name.label }}</h3></label>
                        {% render_field form.name class+='form-control' %}
                        {% for error in form.name.errors %}
                        <div class="alert alert-warning">{{ error }}</div>
                        {% endfor %}
                        <label for="id_description"><h3>{{ form.description.label }}</h3></label>
                        {% render_field form.description class+='form-control' %}
                        {% for error in form.description.errors %}
                        <div class="alert alert-warning">{{ error }}</div>
                        {% endfor %}
                        <label for="id_public"><h3>{{ form.public.label }}</h3></label>
                        {% render_field form.public class+='form-control' %}
                        {% for error in form.public.errors %}
                        <div class="alert alert-warning">{{ error }}</div>
                        {% endfor %}
                        <label for="id_file"><h3>{{ form.file.label }}</h3></label>
                        {% render_field form.file class+='form-control' %}
                        {% for error in form.file.errors %}
                        <div class="alert alert-warning">{{ error }}</div>
                        {% endfor %}
                        <input class="btn btn-primary pull-right" type="submit" value="Upload">

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}