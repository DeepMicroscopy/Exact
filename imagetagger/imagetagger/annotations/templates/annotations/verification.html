{% extends 'base/base.html' %}
{% load static %}
{% load i18n %}

{% block taggerimports %}
    <link rel="stylesheet" type="text/css" href="{% static 'annotations/css/slider.css' %}" />
    {% block additional_annotation_css %}
    {% endblock additional_annotation_css %}
{% endblock %}
{% block additional_js %}
<script type="text/javascript" src="{% static 'annotations/js/verification.js' %}"></script>
{% endblock additional_js %}
{% block bodyblock %}
<div class="container-fluid">
    <div id="feedback_connection_error" class="js_feedback alert alert-danger hidden">
        {% trans 'There was an unhandled error during the connection.' %}
    </div>
    <div class="row">
        <div class="col-md-3">
            {# these select options should get generated by the js-stuff based on the annotation types  #}
            <select name="selected_annotation_type">
            </select>
            <p>
            <label class="switch">
                <input id="filter_verified_checkbox" type="checkbox">
                <span class="slider round"></span>
            </label>
            filter already verified annotations</p>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <a href="{% url 'annotations:manage_annotations' image.image_set.id %}">
                        <u><h3 class="panel-title">{{image.image_set.name}}</h3></u></a>
                </div>
                <div id="annotation_list" class="panel-body"></div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="wrapper">
                <img id="picture" src="{% url 'images:view_image' image.id %}" alt="Picture {{image.name}} not found!" width="100%" data-x="{{ annotation.vector.x1 }}" data-y="{{ annotation.vector.y1 }}" data-width="{{ width }}" data-height="{{ height }}"></br>
            </div>
        </div>
        <div class="col-md-3">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form id='verification_form' enctype="multipart/form-data" method="post" action="{% url 'annotations:verify' annotation.id %}{% if filtered is not None %}?selected_annotation_type={{ filtered }}{% endif %}">
                        {% csrf_token %}
                        <input type='hidden' id='state' name='state' value='blank'>
                        <input type='hidden' id='annotation' name='annotation' value='{{ annotation.id }}'>
                        <div class="row">
                            <div class="col-md-6">
                                <h4><b>Annotation type: {{ annotation_type.name }}</b></h4>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-warning btn-block" type='button' id='edit_button'>
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit (e)</button>
                            </div>
                            <div class="col-md-12"><p></p></div>
                            <div class="col-md-6">
                                <button class="btn btn-lg btn-success btn-block" type='button' id='accept_button'>
                                    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> YAY (j)</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-lg btn-danger btn-block" type='button' id='reject_button'>
                                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> NAY (k)</button>
                            </div>
                            <div class="col-md-12"><p></p></div>
                            <div class="col-md-6">
                                <button class="btn btn-default btn-block" type='button' id='last_button'>
                                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Last (s)</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default btn-block" type='button' id='next_button'>
                                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> Next (d)</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% csrf_token %}
<span id="image_set_id" class="hidden">{{ image.image_set.id }}</span>{# TODO: data field? #}
{% endblock %}
